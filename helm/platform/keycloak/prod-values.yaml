production: true
tls:
  enabled: true
  autoGenerated: true

externalSecret:
  secretStore:
    name: keycloak-secret-store
  secretName: keycloak-external-secret
  dataKey: prod/infra
  serviceAccount:
    name: keycloak-external-secrets
    create: true
    annotations:
      eks.amazonaws.com/role-arn: arn:aws:iam::209479278227:role/eks-prod-custella-external-secrets

auth:
  adminUser: admin
  existingSecret: keycloak-external-secret
  passwordSecretKey: keycloakAdminPassword

extraEnvVars:
  - name: KC_PROXY
    value: "edge"
  - name: KEYCLOAK_EXTRA_ARGS
    value: --import-realm

extraVolumes:
  - name: realm-secret
    secret:
      secretName: realm-secret

extraVolumeMounts:
  - name: realm-secret
    mountPath: "/opt/bitnami/keycloak/data/import"
    readOnly: true

postgresql:
  enabled: false

externalDatabase:
  host: prod-postgres.crmsi0g864ri.ap-northeast-2.rds.amazonaws.com
  port: 5432
  existingSecret: keycloak-external-secret
  existingSecretDatabaseKey: keycloakDb
  existingSecretUserKey: keycloakDbUser
  existingSecretPasswordKey: keycloakDbPassword

ingress:
  enabled: true
  ingressClassName: alb
  hostname: ""
  extraRules:
    - host: prod-keycloak.custellax.com
      http:
        paths:
          - path: /
            pathType: Prefix
            backend:
              service:
                name: keycloak
                port:
                  name: http
  annotations:
    alb.ingress.kubernetes.io/group.name: prod-custella
    alb.ingress.kubernetes.io/healthcheck-path: /realms/master
    alb.ingress.kubernetes.io/load-balancer-name: prod-custella
    alb.ingress.kubernetes.io/scheme: internet-facing
    alb.ingress.kubernetes.io/target-type: ip
    alb.ingress.kubernetes.io/certificate-arn: arn:aws:acm:ap-northeast-2:209479278227:certificate/24e0094f-d0d6-4c34-a951-daac28b02696
    alb.ingress.kubernetes.io/listen-ports: '[{"HTTP": 80}, {"HTTPS":443}]'
    alb.ingress.kubernetes.io/actions.ssl-redirect: '443'
    alb.ingress.kubernetes.io/subnets: subnet-06c6613270b6bffbc, subnet-06ec5f0c6194522b5